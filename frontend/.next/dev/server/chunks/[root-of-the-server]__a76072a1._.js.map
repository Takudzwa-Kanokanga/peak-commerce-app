{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/uncommonstudent/Desktop/Software%20Dev%20Specialization/peak-commerce-app/frontend/app/api/products/%5Bid%5D/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\nimport { auth } from \"@clerk/nextjs/server\"\r\n\r\n// Mock database\r\nlet products: Record<string, any> = {\r\n  \"1\": {\r\n    id: 1,\r\n    name: \"Wireless Bluetooth Headphones\",\r\n    price: 79.99,\r\n    category: \"Audio\",\r\n    description: \"Premium wireless headphones with active noise cancellation and 30-hour battery life. Perfect for music lovers and professionals.\",\r\n    image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600&h=600&fit=crop\",\r\n    stock: 150,\r\n    features: [\"Active Noise Cancellation (ANC)\", \"30-hour battery life\", \"Bluetooth 5.0\", \"Foldable design\"],\r\n  },\r\n  \"2\": {\r\n    id: 2,\r\n    name: \"Smartwatch with Heart Monitor\",\r\n    price: 199.99,\r\n    category: \"Wearables\",\r\n    description: \"Advanced smartwatch with health monitoring features and fitness tracking. Track your daily activity and health metrics.\",\r\n    image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=600&h=600&fit=crop\",\r\n    stock: 80,\r\n    features: [\"Heart rate monitor\", \"GPS tracking\", \"Water resistant (50m)\", \"AMOLED display\"],\r\n  },\r\n  \"3\": {\r\n    id: 3,\r\n    name: \"Portable Bluetooth Speaker\",\r\n    price: 89.99,\r\n    category: \"Audio\",\r\n    description: \"Compact yet powerful Bluetooth speaker with amazing sound quality and portability.\",\r\n    image: \"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=600&h=600&fit=crop\",\r\n    stock: 230,\r\n    features: [\"Waterproof design\", \"20-hour battery\", \"360Â° sound\", \"Portable with strap\"],\r\n  },\r\n  \"4\": {\r\n    id: 4,\r\n    name: \"USB-C Charging Cable\",\r\n    price: 14.99,\r\n    category: \"Accessories\",\r\n    description: \"Fast-charging USB-C cable with durable braided design. Perfect replacement for your device.\",\r\n    image: \"https://images.unsplash.com/photo-1625948515291-69613efd103f?w=600&h=600&fit=crop\",\r\n    stock: 500,\r\n    features: [\"Fast charging support\", \"Braided design\", \"2-meter length\", \"Durable and reliable\"],\r\n  },\r\n  \"5\": {\r\n    id: 5,\r\n    name: \"Wireless Mouse\",\r\n    price: 34.99,\r\n    category: \"Accessories\",\r\n    description: \"Ergonomic wireless mouse with precision tracking for comfortable all-day use.\",\r\n    image: \"https://images.unsplash.com/photo-1527814050087-3793815479db?w=600&h=600&fit=crop\",\r\n    stock: 120,\r\n    features: [\"Ergonomic design\", \"Precision tracking\", \"6-month battery\", \"2.4GHz wireless\"],\r\n  },\r\n  \"6\": {\r\n    id: 6,\r\n    name: \"4K Webcam\",\r\n    price: 129.99,\r\n    category: \"Electronics\",\r\n    description: \"Professional 4K webcam with auto-focus and noise reduction for crystal clear video calls.\",\r\n    image: \"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=600&h=600&fit=crop\",\r\n    stock: 45,\r\n    features: [\"4K resolution\", \"Auto-focus\", \"Noise reduction\", \"Wide angle lens\"],\r\n  },\r\n}\r\n\r\nexport async function GET(request: NextRequest, context: any) {\r\n  const { params } = context\r\n  try {\r\n    const product = products[params.id]\r\n\r\n    if (!product) {\r\n      return NextResponse.json({ success: false, error: \"Product not found\" }, { status: 404 })\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: product,\r\n    })\r\n  } catch (error) {\r\n    return NextResponse.json({ success: false, error: \"Failed to fetch product\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function PATCH(request: NextRequest, context: any) {\r\n  const { params } = context\r\n  try {\r\n    const { userId } = await auth()\r\n\r\n    if (!userId) {\r\n      return NextResponse.json({ success: false, error: \"Unauthorized\" }, { status: 401 })\r\n    }\r\n\r\n    const product = products[params.id]\r\n\r\n    if (!product) {\r\n      return NextResponse.json({ success: false, error: \"Product not found\" }, { status: 404 })\r\n    }\r\n\r\n    const formData = await request.formData()\r\n    const name = formData.get(\"name\") as string\r\n    const price = formData.get(\"price\") ? parseFloat(formData.get(\"price\") as string) : undefined\r\n    const category = formData.get(\"category\") as string\r\n    const description = formData.get(\"description\") as string\r\n    const stock = formData.get(\"stock\") ? parseInt(formData.get(\"stock\") as string) : undefined\r\n    const features = formData.get(\"features\") ? JSON.parse(formData.get(\"features\") as string) : undefined\r\n    const imageFile = formData.get(\"image\") as File | null\r\n\r\n    // Update product fields\r\n    const updatedProduct = { ...products[params.id] }\r\n    \r\n    if (name) updatedProduct.name = name\r\n    if (price !== undefined) updatedProduct.price = price\r\n    if (category) updatedProduct.category = category\r\n    if (description) updatedProduct.description = description\r\n    if (stock !== undefined) updatedProduct.stock = stock\r\n    if (features) updatedProduct.features = features\r\n\r\n    if (imageFile) {\r\n      const buffer = await imageFile.arrayBuffer()\r\n      const base64 = Buffer.from(buffer).toString(\"base64\")\r\n      updatedProduct.image = `data:${imageFile.type};base64,${base64}`\r\n    }\r\n\r\n    products[params.id] = updatedProduct\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: updatedProduct,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"Error updating product:\", error)\r\n    return NextResponse.json(\r\n      { success: false, error: \"Failed to update product\" },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function DELETE(request: NextRequest, context: any) {\r\n  const { params } = context\r\n  try {\r\n    const { userId } = await auth()\r\n\r\n    if (!userId) {\r\n      return NextResponse.json({ success: false, error: \"Unauthorized\" }, { status: 401 })\r\n    }\r\n\r\n    const product = products[params.id]\r\n\r\n    if (!product) {\r\n      return NextResponse.json({ success: false, error: \"Product not found\" }, { status: 404 })\r\n    }\r\n\r\n    delete products[params.id]\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: product,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"Error deleting product:\", error)\r\n    return NextResponse.json(\r\n      { success: false, error: \"Failed to delete product\" },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}