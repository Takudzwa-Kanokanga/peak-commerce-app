{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/uncommonstudent/Desktop/Software%20Dev%20Specialization/peak-commerce-app/frontend/context/CartContext.tsx"],"sourcesContent":["// context/CartContext.tsx\r\n\"use client\"\r\n\r\nimport React, { createContext, useContext, useState, useMemo, ReactNode } from \"react\"\r\n\r\n// Define the shape of a product in the cart\r\ninterface CartItem {\r\n  id: number\r\n  name: string\r\n  price: number\r\n  image: string\r\n  quantity: number\r\n}\r\n\r\n// Define the shape of the context\r\ninterface CartContextType {\r\n  cart: CartItem[]\r\n  addToCart: (product: Omit<CartItem, 'quantity'>) => void\r\n  removeFromCart: (productId: number) => void\r\n  updateQuantity: (productId: number, newQuantity: number) => void\r\n  totalItems: number\r\n  totalPrice: number\r\n}\r\n\r\n// Create the context\r\nconst CartContext = createContext<CartContextType | undefined>(undefined)\r\n\r\n// Provider component\r\nexport const CartProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [cart, setCart] = useState<CartItem[]>([])\r\n\r\n  // Function to add a product to the cart (or increment quantity if it exists)\r\n  const addToCart = (product: Omit<CartItem, 'quantity'>) => {\r\n    setCart(currentCart => {\r\n      const existingItem = currentCart.find(item => item.id === product.id)\r\n      \r\n      if (existingItem) {\r\n        // If product exists, increment quantity\r\n        return currentCart.map(item => \r\n          item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\r\n        )\r\n      } else {\r\n        // Otherwise, add new product with quantity 1\r\n        return [...currentCart, { ...product, quantity: 1 }]\r\n      }\r\n    })\r\n  }\r\n\r\n  // Function to remove a product completely\r\n  const removeFromCart = (productId: number) => {\r\n    setCart(currentCart => currentCart.filter(item => item.id !== productId))\r\n  }\r\n\r\n  // Function to update the quantity of a product\r\n  const updateQuantity = (productId: number, newQuantity: number) => {\r\n    setCart(currentCart => {\r\n      if (newQuantity <= 0) {\r\n        // If quantity is zero or less, remove the item\r\n        return currentCart.filter(item => item.id !== productId)\r\n      }\r\n      \r\n      return currentCart.map(item => \r\n        item.id === productId ? { ...item, quantity: newQuantity } : item\r\n      )\r\n    })\r\n  }\r\n\r\n  // Calculate total number of items and total price\r\n  const { totalItems, totalPrice } = useMemo(() => {\r\n    const items = cart.reduce((sum, item) => sum + item.quantity, 0)\r\n    const price = cart.reduce((sum, item) => sum + item.price * item.quantity, 0)\r\n    return { totalItems: items, totalPrice: price }\r\n  }, [cart])\r\n\r\n  const contextValue = useMemo(() => ({\r\n    cart,\r\n    addToCart,\r\n    removeFromCart,\r\n    updateQuantity,\r\n    totalItems,\r\n    totalPrice,\r\n  }), [cart, totalItems, totalPrice])\r\n\r\n  return (\r\n    <CartContext.Provider value={contextValue}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  )\r\n}\r\n\r\n// Custom hook to use the cart context\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext)\r\n  if (context === undefined) {\r\n    throw new Error('useCart must be used within a CartProvider')\r\n  }\r\n  return context\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;;;AAG1B;AAFA;;;AAuBA,qBAAqB;AACrB,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAGxD,MAAM,eAAkD,CAAC,EAAE,QAAQ,EAAE;IAC1E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAE/C,6EAA6E;IAC7E,MAAM,YAAY,CAAC;QACjB,QAAQ,CAAA;YACN,MAAM,eAAe,YAAY,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,QAAQ,EAAE;YAEpE,IAAI,cAAc;gBAChB,wCAAwC;gBACxC,OAAO,YAAY,GAAG,CAAC,CAAA,OACrB,KAAK,EAAE,KAAK,QAAQ,EAAE,GAAG;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IAAI;YAExE,OAAO;gBACL,6CAA6C;gBAC7C,OAAO;uBAAI;oBAAa;wBAAE,GAAG,OAAO;wBAAE,UAAU;oBAAE;iBAAE;YACtD;QACF;IACF;IAEA,0CAA0C;IAC1C,MAAM,iBAAiB,CAAC;QACtB,QAAQ,CAAA,cAAe,YAAY,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAChE;IAEA,+CAA+C;IAC/C,MAAM,iBAAiB,CAAC,WAAmB;QACzC,QAAQ,CAAA;YACN,IAAI,eAAe,GAAG;gBACpB,+CAA+C;gBAC/C,OAAO,YAAY,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;YAChD;YAEA,OAAO,YAAY,GAAG,CAAC,CAAA,OACrB,KAAK,EAAE,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAY,IAAI;QAEjE;IACF;IAEA,kDAAkD;IAClD,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,gNAAO,EAAC;QACzC,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;QAC9D,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;QAC3E,OAAO;YAAE,YAAY;YAAO,YAAY;QAAM;IAChD,GAAG;QAAC;KAAK;IAET,MAAM,eAAe,IAAA,gNAAO,EAAC,IAAM,CAAC;YAClC;YACA;YACA;YACA;YACA;YACA;QACF,CAAC,GAAG;QAAC;QAAM;QAAY;KAAW;IAElC,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAGO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}